(function(e,t,n,r){function S(e){while(e&&typeof e.originalEvent!=="undefined"){e=e.originalEvent}return e}function x(t,n){var i=t.type,s,o,a,l,c,h,p,d;t=e.Event(t);t.type=n;s=t.originalEvent;o=e.event.props;if(i.search(/^(mouse|click)/)>-1){o=f}if(s){for(p=o.length,l;p;){l=o[--p];t[l]=s[l]}}if(i.search(/mouse(down|up)|click/)>-1&&!t.which){t.which=1}if(i.search(/^touch/)!==-1){a=S(s);i=a.touches;c=a.changedTouches;h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h){for(d=0,len=u.length;d<len;d++){l=u[d];t[l]=h[l]}}}return t}function T(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r){if(r[s]){n[s]=n.hasVirtualBinding=true}}t=t.parentNode}return n}function N(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n])){return t}t=t.parentNode}return null}function C(){g=false}function k(){g=true}function L(){E=0;v.length=0;m=false;k()}function A(){C()}function O(){M();c=setTimeout(function(){c=0;L()},e.vmouse.resetTimerDuration)}function M(){if(c){clearTimeout(c);c=0}}function _(t,n,r){var i;if(r&&r[t]||!r&&N(n.target,t)){i=x(n,t);e(n.target).trigger(i)}return i}function D(t){var n=e.data(t.target,s);if(!m&&(!E||E!==n)){var r=_("v"+t.type,t);if(r){if(r.isDefaultPrevented()){t.preventDefault()}if(r.isPropagationStopped()){t.stopPropagation()}if(r.isImmediatePropagationStopped()){t.stopImmediatePropagation()}}}}function P(t){var n=S(t).touches,r,i;if(n&&n.length===1){r=t.target;i=T(r);if(i.hasVirtualBinding){E=w++;e.data(r,s,E);M();A();d=false;var o=S(t).touches[0];h=o.pageX;p=o.pageY;_("vmouseover",t,i);_("vmousedown",t,i)}}}function H(e){if(g){return}if(!d){_("vmousecancel",e,T(e.target))}d=true;O()}function B(t){if(g){return}var n=S(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold;d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,flags=T(t.target);if(d&&!r){_("vmousecancel",t,flags)}_("vmousemove",t,flags);O()}function j(e){if(g){return}k();var t=T(e.target),n;_("vmouseup",e,t);if(!d){var r=_("vclick",e,t);if(r&&r.isDefaultPrevented()){n=S(e).changedTouches[0];v.push({touchID:E,x:n.clientX,y:n.clientY});m=true}}_("vmouseout",e,t);d=false;O()}function F(t){var n=e.data(t,i),r;if(n){for(r in n){if(n[r]){return true}}}return false}function I(){}function q(t){var n=t.substr(1);return{setup:function(r,s){if(!F(this)){e.data(this,i,{})}var o=e.data(this,i);o[t]=true;l[t]=(l[t]||0)+1;if(l[t]===1){b.bind(n,D)}e(this).bind(n,I);if(y){l["touchstart"]=(l["touchstart"]||0)+1;if(l["touchstart"]===1){b.bind("touchstart",P).bind("touchend",j).bind("touchmove",B).bind("scroll",H)}}},teardown:function(r,s){--l[t];if(!l[t]){b.unbind(n,D)}if(y){--l["touchstart"];if(!l["touchstart"]){b.unbind("touchstart",P).unbind("touchmove",B).unbind("touchend",j).unbind("scroll",H)}}var o=e(this),u=e.data(this,i);if(u){u[t]=false}o.unbind(n,I);if(!F(this)){o.removeData(i)}}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=false,v=[],m=false,g=false,y="addEventListener"in n,b=e(n),w=1,E=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var R=0;R<o.length;R++){e.event.special[o[R]]=q(o[R])}if(y){n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX;o=t.clientY;threshold=e.vmouse.clickDistanceThreshold;u=r;while(u){for(a=0;a<n;a++){f=v[a];l=0;if(u===r&&Math.abs(f.x-i)<threshold&&Math.abs(f.y-o)<threshold||e.data(u,s)===f.touchID){t.preventDefault();t.stopPropagation();return}}u=u.parentNode}}},true)}})(jQuery,window,document);(function(e,t,n){function r(t,n,r){var i=r.type;r.type=n;e.event.handle.call(t,r);r.type=i}e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)};e.attrFn[n]=true});e.event.special.tap={setup:function(){var t=this,n=e(t);n.bind("touchstart",function(i){function a(){clearTimeout(u)}function f(){a();n.unbind("vclick",l).unbind("vmouseup",a);e(document).unbind("vmousecancel",f)}function l(e){f();if(s==e.target){r(t,"tap",e)}}if(i.which&&i.which!==1){return false}var s=i.target,o=i.originalEvent,u;n.bind("vmouseup",a).bind("vclick",l);e(document).bind("vmousecancel",f);u=setTimeout(function(){r(t,"taphold",e.Event("taphold",{target:s}))},750)})}};e.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:50,verticalDistanceThreshold:75,setup:function(){var t=this,r=e(t);r.bind("touchstart",function(t){function u(t){if(!s){return}var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;o={time:(new Date).getTime(),coords:[n.pageX,n.pageY]};if(Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold){t.preventDefault()}}var i=t.originalEvent.touches?t.originalEvent.touches[0]:t,s={time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:e(t.target)},o;r.bind("touchmove",u).one("touchend",function(t){r.unbind("touchmove",u);if(s&&o){if(o.time-s.time<e.event.special.swipe.durationThreshold&&Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(s.coords[1]-o.coords[1])<e.event.special.swipe.verticalDistanceThreshold){s.origin.trigger("swipe").trigger(s.coords[0]>o.coords[0]?"swipeleft":"swiperight")}}s=o=n})})}};e.each({taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)}}})})(jQuery,this)